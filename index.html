<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SZMC Pro: AI Medical Presentation Maker</title>
    <style>
        :root {
            --primary: #005eb8; /* NHS Blue/Medical Blue */
            --secondary: #003087;
            --accent: #00b092;
            --bg: #f4f7f6;
            --card-bg: #ffffff;
            --text: #333333;
            --border: #e0e0e0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 15px;
            margin-bottom: 25px;
        }

        h1 { margin: 0; font-size: 1.8rem; color: var(--secondary); }
        .badge { background: var(--primary); color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; vertical-align: middle; }

        /* Controls Grid */
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        label { display: block; font-weight: 600; margin-bottom: 5px; font-size: 0.9rem; }
        
        select, input, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 1rem;
            box-sizing: border-box;
        }

        select { background-color: white; }
        
        /* Form Sections */
        .section-title {
            font-size: 1.1rem;
            color: var(--primary);
            margin-top: 20px;
            margin-bottom: 10px;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }

        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; }

        textarea { resize: vertical; min-height: 80px; font-family: inherit; }

        /* Buttons */
        .actions {
            margin-top: 30px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .btn-primary { background-color: var(--primary); color: white; flex: 2; }
        .btn-primary:hover { background-color: var(--secondary); }

        .btn-secondary { background-color: white; border: 2px solid var(--border); color: var(--text); }
        .btn-secondary:hover { border-color: var(--primary); color: var(--primary); }

        /* Output Area */
        #output-area {
            margin-top: 30px;
            background: #fafafa;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            display: none;
        }

        .output-header { display: flex; justify-content: space-between; margin-bottom: 15px; }
        pre { white-space: pre-wrap; font-family: 'Courier New', Courier, monospace; font-size: 0.95rem; }

        /* Utility classes for toggling */
        .hidden { display: none; }

        @media (max-width: 768px) {
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div>
            <h1>SZMC Pro <span class="badge">v2.0</span></h1>
            <small style="color: #666;">Universal Medical Presentation Maker</small>
        </div>
        <div>
            <span id="date-display" style="font-weight: bold; color: var(--primary);"></span>
        </div>
    </header>

    <div class="controls">
        <div>
            <label>Specialty Mode</label>
            <select id="specialty" onchange="updateForm()">
                <option value="internal">Internal Medicine</option>
                <option value="geriatrics" selected>Geriatrics</option>
                <option value="surgery">General Surgery</option>
                <option value="pediatrics">Pediatrics</option>
                <option value="psychiatry">Psychiatry</option>
                <option value="obgyn">OB/GYN</option>
            </select>
        </div>
        <div>
            <label>Output Format</label>
            <select id="format">
                <option value="case">Formal Case Presentation</option>
                <option value="admission">Admission Note</option>
                <option value="discharge">Discharge Summary</option>
                <option value="consult">Consult Note</option>
            </select>
        </div>
        <div>
            <label>Target Language</label>
            <select id="language">
                <option value="english">English (Professional)</option>
                <option value="hebrew">Hebrew (Professional)</option>
            </select>
        </div>
    </div>

    <div class="section-title">Patient Demographics</div>
    <div class="grid-3">
        <div><label>Age</label><input type="number" id="age" placeholder="85"></div>
        <div><label>Gender</label><select id="sex"><option>Male</option><option>Female</option></select></div>
        <div><label>Chief Complaint (CC)</label><input type="text" id="cc" placeholder="e.g., Shortness of breath"></div>
    </div>

    <div class="section-title">History of Present Illness</div>
    <textarea id="hpi" placeholder="Describe the onset, duration, character, aggravating/alleviating factors..."></textarea>

    <div class="section-title">Background History</div>
    <div class="grid-2">
        <div>
            <label>Past Medical History (PMH)</label>
            <textarea id="pmh" rows="4"></textarea>
        </div>
        <div>
            <label>Medications</label>
            <textarea id="meds" rows="4" placeholder="List or 'See attached'"></textarea>
        </div>
    </div>

    <div id="spec-geriatrics" class="specialty-section">
        <div class="section-title">Geriatric Assessment</div>
        <div class="grid-2">
            <div>
                <label>Baseline Functional Status</label>
                <textarea id="ger-func" placeholder="ADLs (Bathing, dressing...) &#10;IADLs (Shopping, finances...)"></textarea>
            </div>
            <div>
                <label>Geriatric Giants / Syndromes</label>
                <textarea id="ger-syn" placeholder="Falls, Incontinence, Delirium, Frailty status"></textarea>
            </div>
        </div>
        <div class="grid-2" style="margin-top:10px;">
            <div><label>Cognitive Status</label><input type="text" id="ger-cog" placeholder="e.g. MMSE 24/30, known Dementia"></div>
            <div><label>Social Support</label><input type="text" id="ger-soc" placeholder="Lives alone/with family, caregiver?"></div>
        </div>
    </div>

    <div id="spec-pediatrics" class="specialty-section hidden">
        <div class="section-title">Pediatric History</div>
        <div class="grid-2">
            <div>
                <label>Birth History</label>
                <textarea id="ped-birth" placeholder="Term/Preterm, delivery method, complications, BW"></textarea>
            </div>
            <div>
                <label>Developmental Milestones</label>
                <textarea id="ped-dev" placeholder="Gross motor, fine motor, speech, social"></textarea>
            </div>
        </div>
        <div style="margin-top:10px;">
            <label>Immunizations</label>
            <input type="text" id="ped-imm" placeholder="Up to date according to Tipat Halav?">
        </div>
    </div>

    <div id="spec-surgery" class="specialty-section hidden">
        <div class="section-title">Surgical Profile</div>
        <div class="grid-2">
            <div>
                <label>Previous Surgeries</label>
                <textarea id="surg-hist"></textarea>
            </div>
            <div>
                <label>Pre-Op Risk Factors</label>
                <textarea id="surg-risk" placeholder="Cardiac risk, Anticoagulation status, Airway grade"></textarea>
            </div>
        </div>
    </div>

    <div id="spec-obgyn" class="specialty-section hidden">
        <div class="section-title">Obstetric/Gynecologic History</div>
        <div class="grid-3">
            <div><label>G (Gravida)</label><input type="number" id="ob-g"></div>
            <div><label>P (Para)</label><input type="number" id="ob-p"></div>
            <div><label>LMP</label><input type="date" id="ob-lmp"></div>
        </div>
        <div style="margin-top:10px;">
            <label>Obs/Gyn History Details</label>
            <textarea id="ob-hist" placeholder="Previous C-sections, complications, cycle regularity"></textarea>
        </div>
    </div>

    <div id="spec-psychiatry" class="specialty-section hidden">
        <div class="section-title">Psychiatric Assessment</div>
        <div class="grid-2">
            <div>
                <label>Psychiatric History</label>
                <textarea id="psych-hist" placeholder="Previous hospitalizations, suicide attempts, family history"></textarea>
            </div>
            <div>
                <label>Substance Use</label>
                <textarea id="psych-sub" placeholder="Alcohol, drugs, tobacco"></textarea>
            </div>
        </div>
    </div>

    <div class="section-title">Objective Data</div>
    <div class="grid-2">
        <div>
            <label>Physical Examination</label>
            <textarea id="pe" placeholder="Vitals: BP, HR, Temp, Sat&#10;Gen:&#10;CVS:&#10;Resp:&#10;Abd:&#10;Neuro:"></textarea>
        </div>
        <div>
            <label>Labs & Imaging</label>
            <textarea id="labs" placeholder="Pertinent positives/negatives only"></textarea>
        </div>
    </div>

    <div class="section-title">Assessment & Plan</div>
    <textarea id="plan" style="height: 150px;" placeholder="# Problem 1: &#10; - Plan &#10;# Problem 2: &#10; - Plan"></textarea>

    <div class="actions">
        <button class="btn-primary" onclick="generatePrompt()">âœ¨ Generate AI Prompt</button>
        <button class="btn-secondary" onclick="clearForm()">Reset Form</button>
    </div>

    <div id="output-area">
        <div class="output-header">
            <strong>Ready for AI (Copy & Paste to ChatGPT/Claude)</strong>
            <button class="btn-secondary" style="padding: 5px 15px; font-size: 0.8rem;" onclick="copyToClipboard()">Copy Text</button>
        </div>
        <pre id="prompt-output"></pre>
    </div>

</div>

<script>
    // Set date
    document.getElementById('date-display').innerText = new Date().toLocaleDateString('en-IL', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

    function updateForm() {
        // Hide all specialty sections
        document.querySelectorAll('.specialty-section').forEach(el => el.classList.add('hidden'));
        
        // Show selected
        const spec = document.getElementById('specialty').value;
        const target = document.getElementById('spec-' + spec);
        if (target) target.classList.remove('hidden');
    }

    function generatePrompt() {
        const spec = document.getElementById('specialty').value;
        const format = document.getElementById('format').value;
        const lang = document.getElementById('language').value;
        
        // Base Info
        let text = `Act as a senior ${spec} specialist. I need you to write a professional medical ${format} based on the raw data below.\n\n`;
        
        if (lang === 'hebrew') {
            text += `IMPORTANT: Please write the final output in Hebrew (maintain professional medical terminology, using English for drug names or specific acronyms where standard in Israeli medicine).\n\n`;
        }

        text += `PATIENT: ${document.getElementById('age').value}y ${document.getElementById('sex').value}\n`;
        text += `CC: ${document.getElementById('cc').value}\n`;
        text += `HPI: ${document.getElementById('hpi').value}\n`;
        text += `PMH: ${document.getElementById('pmh').value}\n`;
        text += `MEDS: ${document.getElementById('meds').value}\n\n`;

        // Specialty Specifics
        if (spec === 'geriatrics') {
            text += `GERIATRIC ASSESSMENT:\n`;
            text += `- Function: ${document.getElementById('ger-func').value}\n`;
            text += `- Syndromes: ${document.getElementById('ger-syn').value}\n`;
            text += `- Cognition: ${document.getElementById('ger-cog').value}\n`;
            text += `- Social: ${document.getElementById('ger-soc').value}\n\n`;
        } else if (spec === 'pediatrics') {
            text += `PEDIATRIC HISTORY:\n`;
            text += `- Birth: ${document.getElementById('ped-birth').value}\n`;
            text += `- Development: ${document.getElementById('ped-dev').value}\n`;
            text += `- Immuno: ${document.getElementById('ped-imm').value}\n\n`;
        } else if (spec === 'surgery') {
            text += `SURGICAL PROFILE:\n`;
            text += `- Past Ops: ${document.getElementById('surg-hist').value}\n`;
            text += `- Risks: ${document.getElementById('surg-risk').value}\n\n`;
        } else if (spec === 'obgyn') {
            text += `OBGYN HISTORY:\n`;
            text += `- G${document.getElementById('ob-g').value} P${document.getElementById('ob-p').value}, LMP: ${document.getElementById('ob-lmp').value}\n`;
            text += `- Details: ${document.getElementById('ob-hist').value}\n\n`;
        } else if (spec === 'psychiatry') {
            text += `PSYCHIATRIC HISTORY:\n`;
            text += `- History: ${document.getElementById('psych-hist').value}\n`;
            text += `- Substances: ${document.getElementById('psych-sub').value}\n\n`;
        }

        text += `PE: ${document.getElementById('pe').value}\n`;
        text += `LABS/IMAGING: ${document.getElementById('labs').value}\n`;
        text += `ASSESSMENT/PLAN: ${document.getElementById('plan').value}\n\n`;

        text += `INSTRUCTIONS:\n`;
        text += `1. Organize into a standard ${spec} ${format} structure.\n`;
        text += `2. Use bullet points for clarity.\n`;
        text += `3. Be concise but comprehensive.\n`;
        if (spec === 'geriatrics') text += `4. Explicitly mention functional status and geriatric syndromes.\n`;

        document.getElementById('prompt-output').innerText = text;
        document.getElementById('output-area').style.display = 'block';
        
        // Scroll to output
        document.getElementById('output-area').scrollIntoView({behavior: "smooth"});
    }

    function copyToClipboard() {
        const text = document.getElementById('prompt-output').innerText;
        navigator.clipboard.writeText(text).then(() => {
            alert("Prompt copied! Now paste it into ChatGPT/Claude.");
        });
    }

    function clearForm() {
        if(confirm("Clear all data?")) {
            document.querySelectorAll("input, textarea").forEach(e => e.value = "");
            document.getElementById('output-area').style.display = 'none';
        }
    }
</script>

</body>
</html>